<!-- project/patient.html
 Sulaf Al Jabal (U78815065) 11/24/25
 file description: html template dedicated to showing details about a certain Patient record-->

{% extends 'project/base.html' %}

{% block content %}

<h2>Patient: {{patient.firstName}} {{patient.middleName}} {{patient.lastName}}</h2>
{% if patient.picture %}    
    <img src="{{patient.picture.url}}" width="200">
{% else %}
    <img src="../../../media/Default_pfp.jpg" alt="No picture associated with this patient" width="200">
{% endif %}

<p>Address: {{patient.address}}<br>
DOB: {{patient.DOB}} <br>
Age: {{patient.age}} <br>
Is adult? {{patient.isAdult}}<br>
Primary Care Doctor?: {{patient.getPrimaryCareDoctor}}</p>

<h3>Administrative Actions</h3>
<div>
    <a href="{% url 'create_appointment' %}?patient={{patient.pk}}">
        <button type="button">Schedule Appointment for {{patient.firstName}}</button>
    </a>
    <a href="{% url 'update_patient' patient.pk %}">
        <button type="button">Update Patient Information</button>
    </a>
</div>

<h3>{{patient.firstName}}'s Previous Appointments</h3> 
<div>
    <table>
        <tr>
            <th>Appointment Date</th>
            <th>Appointment Time</th>
            <th>Problem</th>
            <th>Type</th>
        </tr>
        {% for a in appointments %}
        <tr>
            <td>
                <a href="{% url 'appointment' a.pk %}">
                    {{a.dateTime|date:"F d, Y"}}
                </a>
            </td>
            <td>{{a.dateTime|date:"g:i A"}}</td>
            <td>{{a.problem}}</td>
            <td>{{a.get_appointmentType_display}}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4">No previous appointments</td>
        </tr>
        {% endfor %}
    </table>
</div>

{% endblock %}